{% extends "layout.html" %}

{% block page_title %}Jalankan Analisis K-Means{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Analisis K-Means</h6>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    Analisis K-Means akan mengelompokkan pelanggan ke dalam segmen berdasarkan pola pembelian mereka (RFM Analysis).
                </div>
                
                <form method="POST">
                    <div class="mb-3">
                        <label for="n_clusters" class="form-label">Jumlah Cluster (Segmen)</label>
                        <select class="form-select" id="n_clusters" name="n_clusters">
                            <option value="3" selected>3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                        <div class="form-text">Pilih jumlah segmen yang ingin dibuat. Rekomendasi: 3-5 segmen.</div>
                    </div>
                    
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('analytics.dashboard') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-1"></i> Kembali
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-play me-1"></i> Jalankan Analisis
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Tentang K-Means Clustering</h6>
            </div>
            <div class="card-body">
                <p>K-Means adalah algoritma clustering yang mengelompokkan data ke dalam K cluster berdasarkan kesamaan karakteristik.</p>
                
                <h6>Langkah-langkah Analisis:</h6>
                <ol>
                    <li>Menghitung nilai RFM (Recency, Frequency, Monetary) untuk setiap pelanggan</li>
                    <li>Menstandarisasi data RFM</li>
                    <li>Menerapkan algoritma K-Means untuk mengelompokkan pelanggan</li>
                    <li>Menyimpan hasil clustering ke database</li>
                </ol>
                
                <h6>Interpretasi Segmen:</h6>
                <ul>
                    <li><strong>VIP:</strong> Pelanggan dengan nilai monetary tinggi dan frequency tinggi</li>
                    <li><strong>Frequent Buyer:</strong> Pelanggan dengan frequency tinggi tetapi monetary sedang</li>
                    <li><strong>Occasional Shopper:</strong> Pelanggan dengan frequency rendah dan monetary rendah</li>
                    <li><strong>New Customer:</strong> Pelanggan dengan recency tinggi (baru saja berbelanja)</li>
                    <li><strong>At Risk:</strong> Pelanggan dengan recency rendah (sudah lama tidak berbelanja)</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}